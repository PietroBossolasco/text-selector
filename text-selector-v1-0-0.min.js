// text-selector V1.0.0 - Made by Pietro Bossolasco
// For docs -> https://github.com/PietroBossolasco/text-selector
const textSelector={s:null,elements:[],d:null,init:function(){for(let e in this.d=document.getElementsByClassName("text-selector"),this.d)if("select-one"==this.d[e].type)try{if(!this.d[e].classList.contains("text-selector-initialized")){let t=this.d[e].getAttribute("text-class"),s=this.d[e].getAttribute("text-element"),l=this.generateId();s=null==s?"p":s,t=null===t?"":t;let i=document.createElement(s);i.classList=t+" text-selector-text",i.innerText=this.d[e].options[this.d[e].selectedIndex].text,i.setAttribute("text-selector-id",l),this.d[e].insertAdjacentElement("afterend",i),i.addEventListener("click",this.clickHandler);let n=document.createElement("div");n.classList="text-selector-selector",n.setAttribute("text-selector-id",l),this.d[e].addEventListener("change",function(){console.log(this),i.innerText=this.options[this.selectedIndex].text}),i.insertAdjacentElement("afterend",n),this.elements.push({id:l,select:this.d[e],text:i,selector:n}),this.d[e].classList.add("text-selector-initialized"),console.log(this.d[e].disabled);let o=e;Object.freeze(o);let c=()=>{this.d[o].disabled&&!i.classList.contains("text-selector-text-disabled")?i.classList.add("text-selector-text-disabled"):!this.d[o].disabled&&i.classList.contains("text-selector-text-disabled")&&i.classList.remove("text-selector-text-disabled"),console.log(o)},r={attributes:!0,childList:!0,subtree:!0},d=new MutationObserver(c);d.observe(this.d[e],r)}}catch(a){console.error("Error during the initialization\n",a)}},generateId:function(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t="",s=!1;for(;!s;){for(let l=0;l<10;l++){let i=Math.floor(Math.random()*e.length);t+=e.charAt(i)}this.isIdInArray(t)||(s=!0)}return t},isIdInArray:function(e){return this.elements.some(t=>t.id===e)},findElementById:function(e){return this.elements.find(t=>t.id===e)},removeAllContainers:function(){this.elements.forEach(e=>{if("none"!=e.selector.style.display)try{$(e.selector).fadeOut(100)}catch(t){e.selector.style.display="none"}})},mouseLeaveHandler:function(e){let t=!1;e.addEventListener("mouseenter",()=>{t=!0}),e.addEventListener("mouseleave",()=>{t=!1,setTimeout(()=>{if(!t)try{$(e).fadeOut(100)}catch(s){e.style.display="none"}},500)})},clickHandler:function(e){textSelector.removeAllContainers();let t=textSelector.findElementById(e.target.getAttribute("text-selector-id"));if(!t.select.disabled){t.selector.addEventListener("mouseleave",textSelector.mouseLeaveHandler(t.selector)),t.selector.innerHTML="";let s=Array.from(t.select.childNodes),l=document.createElement("div");l.classList.add("text-selector-content"),s.forEach(e=>{if(e.innerText){let s=document.createElement("div");e.disabled?s.classList="text-selector-selection text-selector-disabled":e.selected?s.classList="text-selector-selection text-selector-selected":s.classList="text-selector-selection text-selector-normal",s.innerText=e.innerText,e.disabled||s.addEventListener("click",function(){null!=(ex=t.selector.getElementsByClassName("text-selector-selected"))[0]&&(ex[0].classList="text-selector-selection text-selector-normal"),v=this.innerText,this.classList="text-selector-selection text-selector-selected",e.selected=!0,t.text.innerText=v}),l.appendChild(s)}}),t.selector.appendChild(l);try{$(t.selector).fadeIn(100)}catch(i){t.selector.style.display="block"}textSelector.calculatePosition(t,this)}},calculatePosition:function(e,t){let s=t.offsetLeft,l=t.offsetTop;l>e.selector.offsetHeight?(e.selector.style.paddingBottom=t.offsetHeight+10+"px",e.selector.style.top=l-e.selector.offsetHeight+t.offsetHeight+"px",e.selector.style.paddingTop="10px"):(e.selector.style.paddingBottom="10px",e.selector.style.top=l+"px",e.selector.style.paddingTop=t.offsetHeight+10+"px"),s>e.selector.offsetWidth/2+10?e.selector.style.left=s+t.offsetWidth/2-e.selector.offsetWidth/2+"px":e.selector.style.left=s+"px"}};